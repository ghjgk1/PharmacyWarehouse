<Window x:Class="PharmacyWarehouse.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PharmacyWarehouse"
        mc:Ignorable="d" 
        Title="Аптечный склад - Система учета лекарств" 
        WindowState="Maximized"
        WindowStartupLocation="CenterScreen">

        <Grid>
            <Grid.RowDefinitions>
                <!-- Шапка -->
                <RowDefinition Height="Auto"/>
                <!-- Контент -->
                <RowDefinition Height="*"/>
                <!-- Статус бар -->
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Border Grid.Row="0" 
            Background="{StaticResource PrimaryBrush}" 
            Padding="16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Название -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="🏥" FontSize="28" VerticalAlignment="Center" Margin="0,0,12,0"/>
                        <StackPanel>
                            <TextBlock Text="АПТЕЧНЫЙ СКЛАД" 
                              Style="{StaticResource H2}"
                              Foreground="{StaticResource TextWhiteBrush}"
                              Margin="0"/>
                            <TextBlock Text="Система учета лекарственных средств"
                              Style="{StaticResource Caption}"
                              Foreground="{StaticResource GrayLighterBrush}"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Быстрые действия -->
                    <StackPanel Grid.Column="1" 
                       Orientation="Horizontal" 
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center">

                        <Button Style="{StaticResource OutlineButton}"
                        Foreground="{StaticResource TextWhiteBrush}"
                        BorderBrush="{StaticResource GrayLighterBrush}"
                        Margin="8,0"  Click="Receipt_Click">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="📦" Margin="0,0,6,0"/>
                                <TextBlock Text="Прием товара"/>
                            </StackPanel>
                        </Button>

                        <Button Style="{StaticResource OutlineButton}"
                        Foreground="{StaticResource TextWhiteBrush}"
                        BorderBrush="{StaticResource GrayLighterBrush}"
                        Margin="8,0" Click="WriteOff_Click">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="💰" Margin="0,0,6,0"/>
                                <TextBlock Text="Продажа"/>
                            </StackPanel>
                        </Button>

                        <!-- Поиск -->
                        <Border Background="{StaticResource PrimaryLightBrush}"
                        CornerRadius="20"
                        Padding="12,8"
                        Margin="20,0,15,0"
                        Width="250">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="🔍" 
                                  VerticalAlignment="Center"
                                  Margin="0,0,8,0"
                                  Foreground="{StaticResource GrayLighterBrush}"/>
                                <TextBox Text="Поиск товаров..." 
                                x:Name="SearchTextBox"
                                BorderThickness="0"
                                KeyDown="SearchTextBox_KeyDown"
                                GotFocus="SearchTextBox_GotFocus"
                                LostFocus="SearchTextBox_LostFocus"
                                Background="Transparent"
                                Foreground="{StaticResource TextWhiteBrush}"
                                VerticalAlignment="Center"
                                Width="200">
                                    <TextBox.Style>
                                        <Style TargetType="TextBox" BasedOn="{StaticResource {x:Type TextBox}}">
                                            <Style.Triggers>
                                                <Trigger Property="IsFocused" Value="True">
                                                    <Setter Property="Foreground" Value="{StaticResource TextDarkBrush}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBox.Style>
                                </TextBox>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                <!-- Пользователь и уведомления -->
                <StackPanel Grid.Column="2" 
                       Orientation="Horizontal" 
                       VerticalAlignment="Center">

                    <!-- Пользователь -->
                    <Border Background="{StaticResource PrimaryLightBrush}"
        CornerRadius="6"
        Padding="12,8">
                        <Button Background="{StaticResource PrimaryLightBrush}"
                                Click="LogoutButton_Click"
                                Cursor="Hand">

                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <Border Background="{StaticResource SecondaryBrush}"
                    CornerRadius="20"
                    Width="32" Height="32"
                    VerticalAlignment="Center">
                                        <TextBlock Text="👤" 
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"/>
                                    </Border>

                                    <StackPanel Margin="12,0,0,0">
                                        <TextBlock x:Name="UserNameText"
                          Foreground="{StaticResource TextWhiteBrush}"
                          FontWeight="SemiBold"/>
                                        <TextBlock x:Name="UserRoleText"
                          Style="{StaticResource Caption}"
                          Foreground="{StaticResource GrayLighterBrush}"/>
                                    </StackPanel>

                                    <!-- Можно оставить иконку выхода или убрать, так как весь блок теперь кнопка -->
                                    <TextBlock Text="➡️" 
                      FontSize="16"
                      Margin="12,0,0,0"
                      VerticalAlignment="Center"
                      Foreground="{StaticResource GrayLighterBrush}"/>
                                </StackPanel>
                            </Button.Content>
                        </Button>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>

        <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="180"/>
                    <!-- Навигация -->
                    <ColumnDefinition Width="*"/>
                    <!-- Рабочая область -->
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" 
                Background="{StaticResource PrimaryDarkBrush}">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel Margin="0,16,0,0">

                            <!--Справочники-->
                            <TextBlock Text="СПРАВОЧНИКИ" Style="{StaticResource NavHeader}"/>
                            <Button Style="{StaticResource NavItem}" Click="Products_Click">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="💊" Width="24"/>
                                    <TextBlock Text="Товары"/>
                                </StackPanel>
                            </Button>
                            <Button Style="{StaticResource NavItem}" Click="Batches_Click">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="📦" Width="24"/>
                                    <TextBlock Text="Партии"/>
                                </StackPanel>
                            </Button>
                        <Button x:Name="NavSuppliersBtn" Style="{StaticResource NavItem}" Click="Suppliers_Click">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="🏢" Width="24"/>
                                    <TextBlock Text="Поставщики"/>
                                </StackPanel>
                            </Button>
                        <Button x:Name="NavCategoriesBtn" Style="{StaticResource NavItem}" Click="Categories_Click">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="📁" Width="24"/>
                                    <TextBlock Text="Категории"/>
                                </StackPanel>
                            </Button>

                        <!--Документы-->
                            <TextBlock Text="ДОКУМЕНТЫ" Style="{StaticResource NavHeader}"/>
                        <Button Style="{StaticResource NavItem}" Click="Document_Click">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="📄" Width="24"/>
                                <TextBlock Text="Документы"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource NavItem}" Click="Receipt_Click">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="📥" Width="24"/>
                                <TextBlock Text="Приход"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource NavItem}" Click="Sale_Click">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="💰" Width="24"/>
                                    <TextBlock Text="Продажа"/>
                                </StackPanel>
                            </Button>
                        <Button x:Name="NavWriteOffBtn" Style="{StaticResource NavItem}" Click="WriteOff_Click">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="📤" Width="24"/>
                                    <TextBlock Text="Списание"/>
                                </StackPanel>
                            </Button>
                        

                        <!-- Отчеты -->

                        <TextBlock Text="АДМИНИСТРАТИРОВАНИЕ" 
           Style="{StaticResource NavHeader}"
           x:Name="AdminHeader"/>
                        <Button Style="{StaticResource NavItem}" 
        Click="ManageUsers_Click"
        x:Name="NavManageUsersBtn">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="👥" Width="24"/>
                                <TextBlock Text="Пользователи"/>
                            </StackPanel>
                        </Button>


                    </StackPanel>
                    </ScrollViewer>
                </Border>

                <Frame x:Name="MainFrame" 
               Grid.Column="1" 
               NavigationUIVisibility="Hidden"
               Margin="16"/>

            </Grid>
        </Grid>
    </Window>